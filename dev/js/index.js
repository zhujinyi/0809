!function(){function t(t){v.push(t),store.set("gg",v)}function n(){var t=$(".task-list");t.html(null);for(var n=0;n<v.length;n++){var e=a(v[n],n);t.append(e)}i(),c(),p()}function a(t,n){return'<li data-index="'+n+'"><input type="checkbox" '+(t.complated?"checked":"")+'   class="complate"><p class="content">'+t.content+'</p><div class="right"><span class="delete r-main">删除</span><span class="detail r-main">详细</span></div></li>'}function i(){$(".delete.r-main").click(function(){e($(this).parent().parent().data("index"))})}function e(t){confirm("你确定要删除么")&&(v.splice(t,1),s())}function s(){store.set("gg",v),n()}function c(){$(".detail.r-main").click(function(){var t=$(this).parent().parent().data("index");l(v[t],t)})}function l(t,n){var a='<div class="task-detail-mask"></div><div class="task-detail"><form class="up-task"><h2 class="content">'+(t.content||"")+'</h2><div class="input-item"><input type="text" class="db-content"></div><div class="input-item"><textarea class="taile">'+(t.tatil||"")+'</textarea></div><div class="remind input-item"><label for="b">提醒时间</label><input id="b" class="datetime" type="date" value="'+t.datetime+'"></div><div class="input-item"><button class="ut-data">更新</button></div><div class="colse">X</div></form></div>';$(".container .task-list").after(a),o(),d(n),u()}function o(){$(".task-detail-mask,.colse").click(function(){$(".task-detail-mask,.task-detail").remove()})}function d(t){$(".up-task").on("submit",function(a){a.preventDefault();var i={};i.content=$(this).find(".content").text(),i.tatil=$(this).find(".taile").val(),i.datetime=$(this).find(".datetime").val(),r(i,t),$(".task-detail-mask,.task-detail").remove(),n()})}function u(){$(".up-task .content").dblclick(function(){var t=$(this),n=$(".container .up-task .db-content");t.hide(),n.show(),n.val(t.text()),n.focus(),n.on("blur",function(){t.show(),n.hide(),n.val()&&t.text(n.val())})})}function r(t,n){v[n]=$.extend({},v[n],t),store.set("gg",v)}function p(){$(".task-list .complate").click(function(){var t=$(this).parent().data("index");v[t].complated?r({complated:!1},t):r({complated:!0},t)})}var v=[],f=$(".add-task");v=store.get("gg")||[],n(),f.on("submit",function(a){a.preventDefault();var i={};i.content=f.find("input").eq(0).val(),i.content&&(t(i),n(),f.find("input").eq(0).val(null))})}();